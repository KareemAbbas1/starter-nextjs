(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{3490:function(a,b,c){"use strict";c.d(b,{W:function(){return d}});var d=c(9521).ZP.div.withConfig({displayName:"orderComplete__Container",componentId:"sc-1q3fudk-0"})(["max-width:100vw;min-height:100vh;position:relative;margin-bottom:5rem;padding-top:8rem;padding-inline:2rem;display:flex;flex-direction:",";justify-content:space-between;gap:1.5rem;@media(min-width:1400px){padding-inline:15rem;}@media(max-width:600px){flex-direction:column;padding-inline:1rem;}div.order-data{width:65%;min-height:100vh;display:flex;flex-flow:column nowrap;align-items:",";text-align:",";@media(max-width:600px){width:100%;}h1{padding-bottom:1rem;border-bottom:1px solid #ccc;width:100%}ul{margin:0;padding:0% 4%;direction:",";li{margin-inline:0;margin-bottom:1rem;}}pre{font-family:inherit;}div.calc-total-cost{width:100%;border-top:1px solid;display:flex;flex-direction:column;align-items:flex-end;p{width:40%}h2{min-width:40%;}@media(max-width:600px){align-items:",";}}div.total-cost{min-width:40%;align-self:flex-end;margin-top:1rem;border-top:1px solid #ccc;h2{float:right;}}}div.client-info{width:35%;display:flex;flex-direction:column;align-items:",";min-height:fit-content;border:1px dashed #ccc;padding-inline:1rem;text-align:",";h1{width:100%;padding-bottom:1rem;border-bottom:1px solid #ccc;}h2{color:grey;margin:0;font-weight:lighter;}h3{margin:0;margin-bottom:2rem;}button{width:100%;font-size:1.5rem;font-weight:bold;height:3rem;color:#fff;background-color:#F26630;border:none;transition:all 300ms ease-in-out;cursor:pointer;margin-bottom:1rem;&:hover{opacity:0.5;}&:disabled{opacity:0.5;cursor:auto;}}button#cancel-order{width:100%;font-size:1.5rem;font-weight:unset;height:3rem;color:#000;background-color:#fff;border:1px solid;transition:all 300ms ease-in-out;cursor:pointer;&:hover{opacity:0.5;}&:disabled{opacity:0.5;cursor:auto;}}}div.cancel-order-modal{display:none;width:100%;height:100%;top:0;left:0;position:fixed;align-items:center;justify-content:center;border:1px solid;div{width:40%;height:30vh;background-color:#ccc;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid #000;border-radius:5px;span{width:1rem;height:1rem;position:relative;left:46%;bottom:10%;background-color:#000;color:#fff;display:flex;align-items:center;justify-content:center;border:1px solid;border-radius:5px;cursor:pointer;transition:all 300ms ease;&:hover{background-color:transparent;color:#000;border:1px solid #000;}}p{font-size:1.3rem;}button{width:20%;height:2.5rem;font-size:1.3rem;background-color:#000;color:#fff;cursor:pointer;transition:all 300ms ease;&:hover{opacity:0.5;}}}}div.order-sent{width:100%;height:100%;display:flex;flex-direction:column;text-align:center;align-items:center;font-size:1.2rem;div{width:10rem;height:10rem;border:1px solid #F26630;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:4rem;color:#F26630;}}"],function(a){return"English"===a.language?"row":"row-reverse"},function(a){return"العربية"===a.language&&"flex-end"},function(a){return"العربية"===a.language&&"right"},function(a){return"العربية"===a.language&&"rtl"},function(a){return"English"===a.language?"flex-start":"flex-end"},function(a){return"العربية"===a.language&&"flex-end"},function(a){return"العربية"===a.language&&"right"})},2895:function(a,b,c){"use strict";c.r(b);var d=c(29),e=c(7794),f=c.n(e),g=c(7294),h=c(3490),i=c(9669),j=c.n(i),k=c(1163),l=c(5893),m=function(a){var b=a.language,c=(0,g.useState)(),e=c[0],i=c[1],m=(0,g.useState)([]),n=m[0],o=m[1],p=(0,g.useState)(""),q=p[0],r=p[1],s=(0,g.useState)(!1),t=s[0],u=s[1],v=(0,k.useRouter)();(0,g.useEffect)(function(){var a=JSON.parse(localStorage.getItem("Order Data")),b=localStorage.getItem("roomsIds"),c=localStorage.getItem("campId");i(a),o(null!==b&&b.split(",")),r(c)},[]);var w=e&&e.orderDetails.camp[0],x=e&&e.orderDetails.camp[1],y=e&&e.orderDetails.dates[0],z=e&&e.orderDetails.checkout,A=e&&e.orderDetails.dates.length,B=e&&e.orderDetails.guestsCount.adults,C=e&&e.orderDetails.guestsCount.children,D=e&&e.orderDetails.rooms,E=e&&e.orderDetails.roomsPrices,F=e&&e.orderDetails.dinnerData.dinner,G=e&&e.orderDetails.dinnerData.dinnerPrice,H=e&&e.orderDetails.roomsNumbers,I=e&&e.orderDetails.dates,J=e&&"".concat(D.doubleRooms.split(" ")[1]," ").concat(D.doubleRooms.split(" ")[2]),K=e&&D.doubleRooms.split(" ")[0],L=e&&"".concat(D.bungalows.split(" ")[1]),M=e&&"".concat(D.bungalows.split(" ")[0]),N=e&&"".concat(D.huts.split(" ")[1]),O=e&&"".concat(D.huts.split(" ")[0]),P=e&&E.roomPrice,Q=e&&E.bungalowPrice,R=e&&E.hutPrice,S=e&&e.guestInfo.fullName,T=e&&e.guestInfo.email,U=e&&e.guestInfo.phoneNumber;(0,g.useEffect)(function(){var a=!1;window.innerWidth>990&&(window.addEventListener("blur",function(b){a=!0}),window.addEventListener("focus",function(b){a=!1}));var b=function(){if(!1===a|| !1===a&& !1===t)try{Promise.all(n.map(function(a){j().patch("/api/rooms/updateAvailability?remove=on&id=".concat(a),{dates:I})})),localStorage.removeItem("Order Data"),localStorage.removeItem("roomsIds"),localStorage.removeItem("campId")}catch(b){console.error(b.response?b.response.data.message:b)}};return!1===t&&(document.addEventListener("visibilitychange",b),window.addEventListener("beforeunload",b)),function(){document.removeEventListener("visibilitychange",b),window.removeEventListener("beforeunload",b)}},[t,I,n]);var V,W,X=function(a){a.preventDefault(),document.getElementById("myModal").style.display="flex",document.querySelector("body").style.overflowY="hidden"},Y=function(){document.getElementById("myModal").style.display="none",document.querySelector("body").style.overflowY="auto"},Z=(V=(0,d.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Promise.all(n.map(function(a){j().patch("/api/rooms/updateAvailability?remove=on&id=".concat(a),{dates:I})}));case 3:localStorage.removeItem("Order Data"),localStorage.removeItem("roomsIds"),Y(),v.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.error(a.t0.response?a.t0.response.data.message:a.t0);case 12:case"end":return a.stop()}},a,null,[[0,9]])})),function(){return V.apply(this,arguments)}),$=(W=(0,d.Z)(f().mark(function a(b){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.target.disabled=!0,a.prev=1,a.next=4,j().post("/api/campOrders?campId=".concat(q),{orderDetails:e.orderDetails,guestInfo:e.guestInfo,state:e.state,campId:q,roomsIds:n});case 4:u(!0),localStorage.removeItem("Order Data"),localStorage.removeItem("roomsIds"),localStorage.removeItem("campId"),document.body.scrollTop=0,document.documentElement.scrollTop=0,a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.error(a.t0);case 15:case"end":return a.stop()}},a,null,[[1,12]])})),function(a){return W.apply(this,arguments)});return(0,l.jsx)(h.W,{language:b,children:!1===t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"order-data",children:[(0,l.jsx)("h1",{children:"English"===b?"#Checkout":"تأكيد الحجز"}),(0,l.jsx)("h2",{children:"English"===b?"Reservation at ".concat(w):x}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:["English"===b?"Checkin date:":"تاريخ الوصول:"," ",y,", 11:00 ","English"===b?"am":"صباحا"]}),(0,l.jsxs)("li",{children:["English"===b?"Checkout date:":"تاريخ المغادرة:"," ",z,", 11:00 ","English"===b?"am":"صباحا"]}),(0,l.jsxs)("li",{children:["English"===b?"Duration:":"مدة الاقامة:"," ",A," ","English"===b?"nights":"ليالي"]})]}),(0,l.jsx)("h3",{children:"English"===b?"Guest".concat(B>1&&"s"," count:"):":عدد الضيوف"}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:["English"===b?"Adults:":"بالغين"," ",B]}),C>0&&(0,l.jsxs)("li",{children:["English"===b?"".concat(C>1?"Children":"Child",":"):"اطفال"," ",C]})]}),(0,l.jsx)("h3",{children:"English"===b?"Rooms:":":الغرف"}),(0,l.jsxs)("ul",{children:[e&&K>0&&(0,l.jsxs)("li",{children:[K," ","English"===b?"".concat(J).concat(K>1?"s":""):"غرفة مزدوجة"]}),e&&M>0&&(0,l.jsxs)("li",{children:[M," ","English"===b?"".concat(L).concat(M>1?"s":""):"كوخ مزدوج"]}),e&&O>0&&(0,l.jsxs)("li",{children:[O," ","English"===b?"".concat(N).concat(O>1?"s":""):"خوشة"]})]}),"English"===b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h3",{children:[e&&H.length>1?"rooms prices ":"room price ","per night:"]}),(0,l.jsxs)("ul",{children:[e&&K>0&&(0,l.jsxs)("li",{children:[J,": $",P," per night x ",K," ",K>1?"rooms":"room"," = $",P*K]}),e&&M>0&&(0,l.jsxs)("li",{children:[L,": $",Q," per night x ",M," ",M>1?"bungalows":"bungalow"," = $",Q*M]}),e&&O>0&&(0,l.jsxs)("li",{children:[N,": $",R," per night x ",O," ",O>1?"huts":"hut"," = $",R*O]})]}),"on"===F&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{children:"Dinner:"}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:["Dinner price per person: $",G]}),(0,l.jsxs)("li",{children:["Sub Total: ",B," adults x $",G," = $",B*G," per night"]}),(0,l.jsxs)("li",{children:["Total: $",B*G," x ",A," night",A>1?"s":""," = $",B*G*A]})]})]}),(0,l.jsx)("h3",{children:K>1||M>1||O>1?"Rooms Numbers:":"Room Number:"}),(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:K>1||M>1||O>1?H.toString():H})})]}),(0,l.jsxs)("div",{className:"calc-total-cost",children:[(0,l.jsx)("h2",{children:"English"===b?"Total:":":الإجمالي"}),K>0&&(0,l.jsxs)("p",{dir:"العربية"===b&&"rtl",children:[K,"".concat("English"===b?"".concat(J," x"):"غرفة مزدوجة *"," ").concat(A," ").concat("English"===b?"nights":"ليالي"," = $").concat(P*A)]}),M>0&&(0,l.jsxs)("p",{children:[M," ",L," x ",A," nights = $",Q*A]}),O>0&&(0,l.jsxs)("p",{children:[O," ",N," x ",A," nights = $",R*A]}),"on"===F&&(0,l.jsxs)("p",{children:["English"===b?"Dinner":"الغذاء"," = $",B*G*A]})]}),(0,l.jsx)("div",{className:"total-cost",children:(0,l.jsxs)("h2",{className:"total-price",id:"total-price",children:["$",(K>0&&P*K*A)+(M>0&&Q*M*A)+(O>0&&R*O*A)+("on"===F&&B*G*A)]})})]}),(0,l.jsxs)("div",{className:"client-info",children:[(0,l.jsx)("h1",{children:"English"===b?"Guest Information":"بيانات النزيل"}),(0,l.jsx)("h2",{children:"English"===b?"Reservation by:":":حجز باسم"}),(0,l.jsx)("br",{}),(0,l.jsxs)("h3",{children:["- ",S]}),(0,l.jsx)("h2",{children:"English"===b?"Email Addres:":":بريد إلكتروني"}),(0,l.jsx)("br",{}),(0,l.jsxs)("h3",{children:["- ",T]}),(0,l.jsx)("h2",{children:"English"===b?"Phone Number:":":رقم الهاتف"}),(0,l.jsx)("br",{}),(0,l.jsxs)("h3",{children:["- ",U]}),(0,l.jsx)("h2",{children:"English"===b?"Amount to pay:":":المبلغ المستحق"}),(0,l.jsx)("br",{}),(0,l.jsxs)("h3",{children:["- $",(K>0&&P*K*A)+(M>0&&Q*M*A)+(O>0&&R*O*A)+("on"===F&&B*G*A),(0,l.jsxs)("span",{children:[" (",e&&"English"===b?e.state:"آجل",")"]})]}),(0,l.jsx)("h2",{children:"English"===b?"Payment Method:":":طريقة الدفع"}),(0,l.jsx)("br",{}),(0,l.jsx)("h3",{children:"English"===b?"- Pay on arrival":"الدفع عند الوصول"}),(0,l.jsx)("button",{onClick:function(a){return $(a)},disabled:null===e,children:"English"===b?"Confirm Booking":"تأكيد الحجز"}),(0,l.jsx)("button",{id:"cancel-order",onClick:function(a){return X(a)},disabled:null===e,children:"English"===b?"Cancel Booking":"إلغاء الحجز"})]}),(0,l.jsx)("div",{id:"myModal",className:"cancel-order-modal",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{onClick:Y,id:"close-modal",children:"x"}),(0,l.jsx)("p",{children:"English"===b?"Are you sure you want to cancel this order?":"!تأكيد الغاء الحجز"}),(0,l.jsx)("button",{id:"confirm-cancel",onClick:Z,children:"English"===b?"Yes":"نعم"})]})})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"order-sent",children:[(0,l.jsx)("div",{children:"✓"}),(0,l.jsxs)("p",{children:["Your order has been submitted successfully,",(0,l.jsx)("br",{}),"One of our employees will contact you soon.",(0,l.jsx)("br",{}),"Thank you for booking with us."]})]})})})};b.default=m},6916:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orderComplete",function(){return c(2895)}])}},function(a){a.O(0,[646,774,888,179],function(){var b;return a(a.s=6916)}),_N_E=a.O()}])